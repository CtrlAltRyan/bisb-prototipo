{% extends 'layout_painel.html' %}

{% block title %}Vendas{% endblock %}

{% block page_header %}
<div class="page-header__title-group">
    <img src="{{ url_for('static', filename='images/sales_icon.png') }}" class="page-header__icon">
    <h1 class="page-header__title">Vendas</h1>
</div>
{% endblock %}

{% block table_content %}
    <table class="client-table">
        <thead>
            <tr>
                <th><input type="checkbox" id="select-all" aria-label="Selecionar todos"></th>
                <th>ID Cliente</th>
                <th>ID Serviço</th>
                <th>Valor</th>
                <th>Forma de Pagamento</th>
                <th>Data</th>
            </tr>
        </thead>
        <tbody>
            {% for venda in sales %}
            <tr>
                <td><input type="checkbox" class="row-checkbox" aria-label="Selecionar" data-id="{{ venda[0] }}"></td>
                <!-- ID Cliente com nome no popover -->
                <td class="popover-trigger" data-popover="Cliente: {{ venda[5] }}">{{ venda[0] }}</td>
                
                <!-- ID Serviço com nome no popover -->
                <td class="popover-trigger" data-popover="Serviço: {{ venda[6] }}">{{ venda[1] }}</td>
                
                <td>R$ {{ venda[2] }}</td> <!-- Valor -->
                <td>{{ venda[3] }}</td> <!-- Forma de pagamento -->
                <td class="data-a-formatar"> {{ venda[4] }}</td> <!-- Data -->
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock %}

{% block modal_content %}
  <div class="modal modal-alvo">
    <div class="modal-conteudo">
      <span class="fechar-modal">&times;</span>
      <h2>Adicionar Nova Venda</h2>
      
      <form id="form-adicionar-venda" class="form-ajax-submit" data-url="/vendas/adicionar">
        
        <label for="id-cliente">ID do Cliente:</label>
        <input type="number" id="id-cliente" name="id_cliente" required>

        <label for="id-servico">ID do Serviço:</label>
        <input type="number" id="id-servico" name="id_servico" required>

        <label for="valor">Valor (R$):</label>
        <input type="number" id="valor" name="valor" placeholder="100.00" required>
        
        <label for="forma-pagamento">Forma de Pagamento:</label>
        <select id="forma-pagamento" name="forma_pagamento" required>
            <option value="Dinheiro">Dinheiro</option>
            <option value="Crédito">Crédito</option>
            <option value="Débito">Débito</option>
            <option value="Pix">Pix</option>
        </select>

        <label for="data-venda">Data da Venda:</label>
        <input type="date" id="data-venda" name="data_venda" required>
        
        <button type="submit" class="btn-salvar">Salvar Venda</button>
      </form>

    </div>
  </div>
{% endblock modal_content %}
